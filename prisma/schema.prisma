generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model State {
  id             String @id @default(uuid()) @map("id")
  currentStoryId String @map("current_story_id")
  totalWordCount Int    @map("total_word_count")

  story Story @relation(fields: [currentStoryId], references: [id])

  @@map("state")
}

model Story {
  id         String  @id @default(uuid()) @map("id")
  text       String  @map("text")
  isComplete Boolean @default(false) @map("is_complete")

  stats   State[]
  authors Author[]

  @@map("stories")
}

model Author {
  id       String @id @map("id")
  username String @map("username")
  storyId  String @map("story_id")

  story Story @relation(fields: [storyId], references: [id])

  @@map("authors")
}
